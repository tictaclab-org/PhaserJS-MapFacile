<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>PhaserJS #4</title>
  <link rel="shortcut icon" type="image/png" href="images/ico_full.png" />
  <link rel="stylesheet" href="stylesheet/prism.css">
  <link rel="stylesheet" href="stylesheet/style.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css"
    integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>

<body>

  <!-- Introduction -->
  <div class="banner"
    style="display: block !important; background-image: linear-gradient(rgba(0,0,0,0.5),rgba(0,0,0,0.5)), url('https://d2skuhm0vrry40.cloudfront.net/2018/articles/2018-08-29-13-52/nintendo-takes-down-11-year-old-pokemon-fangame-kit-1535547168922.jpg/EG11/thumbnail/750x422/format/jpg/quality/60');">
    <div class="container text-center">
      <div class="main">
        <img src="images/logo.png" alt="">
        <div class="class-title text-center">
          <h1>PhaserJS #4<br> Carte facile</h1>
        </div>
      </div>
      <p>Pour ce module, on se concentre sur la cr√©ation de jeux vid√©os dans le language JavaScript et la librarie
        <b>Phaser</b>.
      </p>
      <a class="btn btn-primary tl-button" href="#challenge" role="button">Commencer !</a>
    </div>
  </div>

  <p id=language-link>üó®Ô∏è For the english version click<a href="english_index.html"> here</a>!</p>

  <div class="container" id="challenge">

    <div class="accordion" id="accordionExample">

      <!-- √âtape 1 -->
      <div class="card">
        <div class="card-header" id="heading1">
          <h2 class="mb-0">
            <button class="btn btn-link done task" type="button" data-toggle="collapse" data-target="#collapse1"
              aria-expanded="false" aria-controls="collapse1">
              √âtape 1 - D√©fis √† compl√©ter avant
            </button>
          </h2>
        </div>
        <div id="collapse1" class="collapse show" aria-labelledby="heading1" data-parent="#accordionExample">
          <div class="card-body">
            <p>Avant d'entamer ce d√©fi, assure-toi d'avoir d√©j√† fait ceux-ci:</p>
            <ul>
              <li><a href="https://tictaclab-org.github.io/PhaserJS-Introduction/">PhaserJS - Personnage</a></li>
              <li><a href="https://tictaclab-org.github.io/PhaserJS-Platforms/">PhaserJS - Plateformes</a></li>
              <li><a href="https://tictaclab-org.github.io/PhaserJS-GagnerPerdre/">PhaserJS - Gagner et Perdre</a></li>
            </ul>
            <p>Aussi, assure-toi que tu sois bien connect√© √† ton compte <a href="https://repl.it">Repl.It</a>, et que tu
              aies ton projet de la fois pass√©e.</p>
          </div>
        </div>
      </div>

      <!-- √âtape 2 -->
      <div class="card">
        <div class="card-header" id="heading2">
          <h2 class="mb-0">
            <button class="btn btn-link task" type="button" data-toggle="collapse" data-target="#collapse2"
              aria-expanded="false" aria-controls="collapse2">
              √âtape 2 - Des piques
            </button>
          </h2>
        </div>
        <div id="collapse2" class="collapse" aria-labelledby="heading2" data-parent="#accordionExample">
          <div class="card-body">
            <p>Le jeu est trop facile pour l'instant tu ne trouves pas? On pourrait ajouter des piques pour le rendre
              plus compliqu√©!</p>

            <p>Premi√®re √©tape: dessine tes piques. Tu peux le faire, comme avant, sur <a
                href="https://www.pixilart.com">pixilart.com</a>, mais si tu pr√©feres un autre site ou t√©l√©charger une
              image, c'est ton choix! Voici mes super piques:</p>

            <img src="./images/spike.png" alt="Spike">

            <p>Ensuite, <i>charge</i> l'image dans ton code, gr√¢ce √† la commande <code>this.load.image</code></p>

            <pre><code class="language-js">
              this.load.image("NOM DE L'OBJET", "NOM DE L'IMAGE");
            </code></pre>

            <p>Ce code doit bien s√ªr appara√Ætre dans la fonction <code>preload</code>.</p>

            <p>Ensuite, on va cr√©er un <b>groupe</b> de piques (<em>spikes</em> en anglais). De cette fa√ßon, on pourra
              facilement en ajouter plusieurs sans devoir trop changer notre code. Te rappelles-tu comment on avait fait
              pour cr√©er un groupe de plateformes?</p>

            <p>
              <a class="btn btn-primary" data-toggle="collapse" href="#collapseHint" role="button" aria-expanded="false"
                aria-controls="collapseHint">Indice</a>
            </p>
            <div class="collapse mb-3" id="collapseHint">
              <div class="card card-body">
                <pre><code class="language-js">
                  this.platforms = this.physics.add.staticGroup();
                </code></pre>
                <p>Note bien que <code>platforms</code> est au pluriel, car il y a plusieurs plateforme<b>s</b>.</p>
              </div>
            </div>

            <p>Pour cr√©er un groupe de piques, ton code sera tr√®s similaire.</p>

            <p>
              <a class="btn btn-danger" data-toggle="collapse" href="#collapseAnswer2" role="button"
                aria-expanded="false" aria-controls="collapseAnswer2">R√©ponse</a>
            </p>
            <div class="collapse mb-3" id="collapseAnswer2">
              <div class="card card-body">
                <pre><code class="language-js">
                  this.spikes = this.physics.add.staticGroup();
                </code></pre>
              </div>
            </div>


            <p>Maintenant que le groupe est cr√©√©, tu peux cr√©er tes piques individuelles en utilisant
              <code>this.spikes.create</code>. Il faut indiquer les coordonn√©es et l'objet √† faire appara√Ætre
              (<em>spawn</em> en anglais).
            </p>

            <pre><code class="language-js">
              this.spikes.create(X, Y, "NOM DE L'OBJET");
            </code></pre>

            <p>Normalement, si tu as tout bien fait, les piques appara√Æssent sur ton √©cran mais n'ont aucun effet sur le
              joueur. Changeons cela!</p>

            <p>On va ajouter un chevauchement (<em>overlap</em> en anglais) entre le joueur et les piques, comme on
              l'avait fait pour la pi√®ce gagnante dans la fiche pr√©c√©dente.</p>

            <pre><code class="language-js">
              this.physics.add.overlap(this.player, this.spikes, function(player, coin) {
                // Ce qui se passe lorsqu'on touche une pique
              }, null, this);
            </code></pre>

            <p>Que doit-il se passer lorsqu'on touche une pique? Notre joueur doit revenir au d√©but du jeu. Pour cela,
              tu dois changer ses coordonn√©es X et Y:</p>

            <pre><code class="language-js">
              this.player.x = /*quelque chose*/;
              this.player.y = /*quelque chose*/;
            </code></pre>

            <p>Et voil√†, on a des piques! Pas si dur que √ßa au final, n'est-ce pas?</p>
          </div>
        </div>
      </div>

      <!-- √âtape 3 -->
      <div class="card">
        <div class="card-header" id="heading3">
          <h2 class="mb-0">
            <button class="btn btn-link task" type="button" data-toggle="collapse" data-target="#collapse3"
              aria-expanded="false" aria-controls="collapse3">
              √âtape 3 - Carte facile üó∫Ô∏è
            </button>
          </h2>
        </div>
        <div id="collapse3" class="collapse" aria-labelledby="heading3" data-parent="#accordionExample">
          <div class="card-body">
            <p>C'est long de devoir √©crire une ligne de code par objet qu'on veut faire appara√Ætre sur notre carte, non?
              Ce serait plus simple si on pouvait dessiner une grille de notre carte que notre programme utiliserait
              pour cr√©er la carte "automatiquement"...</p>

            <p>Regarde cette grille:</p>

            <pre><code class="language-js">
              '11111111111111111111111111'+
              '1               c        1'+
              '1    c     c     s     c 1'+
              '1 2  1  s  1  c  1  c  1 1'+
              '1 1     1     1     1    1'+
              '1                        1'+
              '1    c     c     s     s 1'+
              '1 c  1  s  1  c  1  c  1 1'+
              '1 1     1     1     2    1'+
              '1                        1'+
              '1    c     s     c     c 1'+
              '1 s  2  c  1  c  1  s  1 1'+
              '1 1     1     1     1    1'+
              '1                        1'+
              '1   c       c     c   c  1'+
              '11111111111111111111111111';
            </code></pre>

            <p>Peux-tu deviner √† quoi correspondent les <code>1</code>, <code>2</code>, <code>c</code> et les
              <code>s</code>?
            </p>

            <p>
              <a class="btn btn-danger" data-toggle="collapse" href="#collapseAnswer3a" role="button"
                aria-expanded="false" aria-controls="collapseAnswer3a">R√©ponse</a>
            </p>
            <div class="collapse mb-3" id="collapseAnswer3a">
              <div class="card card-body">
                <p>Les <code>c</code> correspondent aux pi√®ces (<em>coin</em> en anglais).</p>
                <p>Les <code>s</code> correspondent aux piques (<em>spike</em> en anglais).</p>
                <p>Les <code>1</code> et les <code>2</code> correspondent aux plateformes. On verra √† l'√©tape suivante
                  qu'il peut y avoir plusieurs types de plateformes.</p>
              </div>
            </div>

            <p>Cette grille est super importante! C'est ce qui va nous permettre de cr√©er un grand monde plus
              rapidement. Pour un tr√®s grand monde, on utilisera encore une autre solution... dans les derni√®res fiches.
              La premi√®re chose que tu dois faire, c'est cr√©er ta propre grille. Commence avec seulement des
              plateformes (<code>1</code>).</p>

            <p>Sauvegarde ensuite ta grille dans une <b>constante</b> qu'on appellera <code>map</code> (<em>carte</em>
              en anglais). Tu peux d√©clarer cette constante tout en haut de ton programme, avant m√™me de d√©clarer la
              variable <code>config</code>. Voici mon exemple de grille simple:</p>

            <pre><code class="language-js">
              const map = '           ' +
                          '      11   ' +
                          '     1     ' +
                          '1 1       1' +
                          '       1   ';
            </code></pre>

            <div class="alert alert-warning" role="alert">
              <p>
                <i class="fas fa-exclamation-circle"></i> Assure-toi que chaque ligne:
              <ul>
                <li>ait deux guillemets (<code>'</code>), un au d√©but et un √† la fin;</li>
                <li>contienne le m√™me nombre de caract√®res (les espaces comptent aussi!)</li>
                <li>finisse par un <code>+</code> sauf la derni√®re qui finit par un <code>;</code></li>
              </ul>
              </p>
            </div>


            <p>Dans la fonction <code>create</code>, tu peux mettre en commentaire (avec les <code>//</code>) la partie
              o√π tu faisais appara√Ætre toutes tes plateformes. Si tu lances ton programme, elles ont disparu... c'est
              normal!</p>

            <pre>
              <code class="language-js">
              this.platforms = this.physics.add.staticGroup();
              // this.platforms.create(500, 200, "platform");
              // this.platforms.create(300, 100, "platform");
              // this.platforms.create(100, 564, "platform");
              </code>
            </pre>

            <p>On va faire appara√Ætre nos plateformes en fonction de notre grille sauvegard√©e dans notre constante
              <code>map</code>. L'ordinateur va analyser notre grille, ligne par ligne et colonne par colonne. Dans une
              case, si l'ordinateur voit un espace, il ne fera rien. Par contre, si l'ordinateur voit un <code>1</code>,
              il cr√©era une plateforme √† cet endroit.
            </p>

            <p>Pour que l'ordinateur sache o√π positionner exactement les plateformes sur l'√©cran, on va cr√©er une
              variable "X" et une variable "Y" . Dans la fonction <code>create</code>, ajoute tes variables:</p>

            <pre><code class="language-js">
              let X = 40;
              let Y = 40;
            </code></pre>

            <p>Ensuite, on va ajouter deux boucles <code>for</code>... l'une dans l'autre ü§Ø. Pourquoi???</p>

            <p>
              <a class="btn btn-primary" data-toggle="collapse" href="#collapseHint3" role="button"
                aria-expanded="false" aria-controls="collapseHint3">Indice</a>
            </p>
            <div class="collapse mb-3" id="collapseHint3">
              <div class="card card-body">
                <p>C'est parce qu'on veut que l'ordinateur analyse chaque ligne de notre grille (premi√®re boucle), et
                  pour chaque ligne, on veut qu'il analyse chaque colonne (deuxi√®me boucle). </p>
              </div>
            </div>

            <p>Commen√ßons par la premi√®re boucle (pour analyser chaque ligne de notre grille):</p>

            <pre><code class="language-js">
              for (let l = 0; l < 5; l++) {
                // faire quelque chose pour chaque ligne
              }
            </code></pre>

            <p>Pourquoi ma boucle se r√©p√®te-t-elle 5 fois?</p>

            <p>
              <a class="btn btn-danger" data-toggle="collapse" href="#collapseAnswer3c" role="button"
                aria-expanded="false" aria-controls="collapseAnswer3c">R√©ponse</a>
            </p>
            <div class="collapse mb-3" id="collapseAnswer3c">
              <div class="card card-body">
                <p>Parce que dans mon grille (<code>map</code>), il y a 5 lignes. Si ta grille a 7 lignes, ta boucle
                  ressemblera plut√¥t √† ceci: </p>
                <pre><code class="language-js">
                for (let l = 0; l < 7; l++) {
                  // faire quelque chose pour chaque ligne
                }
              </code></pre>
              </div>
            </div>

            <p>√Ä la fin de chaque ligne, que doit-on faire? Eh oui, passer √† la ligne suivante! Pour l'ordinateur, √ßa
              veut dire que les coordonn√©es en Y doivent changer. Comment faire pour faire "descendre" les coordonn√©es
              en Y?</p>

            <p>
              <a class="btn btn-danger" data-toggle="collapse" href="#collapseAnswer3d" role="button"
                aria-expanded="false" aria-controls="collapseAnswer3d">R√©ponse</a>
            </p>
            <div class="collapse mb-3" id="collapseAnswer3d">
              <div class="card card-body">
                <p>On ajoute 40 √† notre variable <code>Y</code></p>
                <pre><code class="language-js">
                  for (let l = 0; l < 5; l++) {
                    // faire quelque chose pour chaque ligne

                    // descendre √† la ligne suivante:
                    Y += 40;
                  }
                </code></pre>

              </div>
            </div>

            <p>Nous sommes maintenant pr√™ts √† analyser chacune de nos lignes, colonne, par colonne. Or dans chaque
              ligne, il y a le m√™me nombre de colonnes (11 dans mon grille). Je vais donc ajouter ma deuxi√®me boucle de
              cette mani√®re:</p>


            <pre><code class="language-js">
              for (let l = 0; l < 5; l++) {

                for (let c = 0; c < 11; c++) {
                  // Analyser chacune des case de la grille
                }

                // descendre √† la ligne suivante:
                Y += 40;
              }
            </code></pre>


            <p>Dans la deuxi√®me boucle, on va dessiner les plateformes. Mais attention! L'ordinateur doit cr√©er une
              plateforme uniquement si le caract√®re dans la case qu'il analyse est un <code>1</code>. On va donc cr√©er
              une variable pour ce caract√®re et ensuite on dessine un bloc s'il vaut "1".</p>

            <pre><code class="language-js">
              let ca = map[11*l + c];
              if (ca === '1') {
                this.platforms.create(X, Y, "platform");
              }
            </code></pre>
            <pre><code class="language-js">
              let ca = map[11*l + c];
              if (ca === '1') {
                this.platforms.create(X, Y, "platform");
              }
            </code></pre>

            <p>De nouveau, si tu n'as pas <b>11</b> colonnes (ou caract√®res) par ligne, change le <b>11</b> en un autre
              nombre.</p>

            <p>Pour passer √† la case suivante, il suffit d'incr√©menter notre valeur en X:</p>

            <pre><code class="language-js">
              let ca = map[11*l + c];
              if (ca === '1') {
                this.platforms.create(X, Y, "platform");
              }
              let ca = map[11*l + c];
              if (ca === '1') {
                this.platforms.create(X, Y, "platform");
              }

              // passer √† la case suivante:
              X += 40;
            </code></pre>

            <p>Derni√®re √©tape: quand on change de ligne, on doit aussi remettre la coordonn√©e X au d√©but de la ligne.
            </p>

            <pre><code class="language-js">
              for (let l = 0; l < 5; l++) {

                for (let c = 0; c < 11; c++) {
                  // Analyser la case et dessiner une plateforme si n√©cessaire
                  let ca = map[11*l + c];
                  if (ca === '1') {
                    this.platforms.create(X, Y, "platform");
                  }

                  // passer √† la case suivante:
                  X += 40;
                }

                // passer √† la ligne suivante:
                Y += 40;
                // aller au d√©but de la ligne suivante:
                X = 40;
              }
            </code></pre>

            <p>Maintenant ton code va dessiner toutes les plateformes tout seul!</p>

            <p>On pourrait aussi ajouter nos piques dans la carte directement. Pour ce faire, √©cris un "p" la o√π tu veux
              tes piques, et ajoute un <code>else if</code> dans ton code</p>

            <pre><code class="language-js">
              if (ca === '1') {
                // ...
              } else if (ca === 'p') {
                // Dessiner une pique aux coordonn√©es X et Y
              }
            </code></pre>

            <p><b>Challenge: </b>Fais la m√™me chose pour tes pi√®ces!</p>

          </div>
        </div>
      </div>

      <!-- √âtape 4 -->
      <div class="card">
        <div class="card-header" id="heading4">
          <h2 class="mb-0">
            <button class="btn btn-link task" type="button" data-toggle="collapse" data-target="#collapse4"
              aria-expanded="false" aria-controls="collapse4">
              √âtape 4 - Diff√©rentes plateformes
            </button>
          </h2>
        </div>
        <div id="collapse4" class="collapse" aria-labelledby="heading4" data-parent="#accordionExample">
          <div class="card-body">
            <p>Tu te demandes s√ªrement pourquoi on a mis "1" pour les plateformes et non "p" (ou une autre lettre)?
              C'est parce qu'on pourrait avoir diff√©rents types de plateformes. Cr√©e une deuxi√®me plateforme et
              <code>load</code>-la correctement dans ton code, sous le nom de "platform2"
            </p>

            <p>Ensuite, si le carct√®re est √©gal √† "2", tu vas simplement cr√©er cette deuxi√®me plateforme.</p>

            <pre><code class="language-js">
              if (c === '1') {
                // ...
              } (c === '2') {
                this.platforms.create(X, Y, "platform2");
              }
            </code></pre>

            <p>Maintenant, tu peux cr√©er un joli long monde, avec diff√©rentes plateformes et obstacles.</p>

            <p>Ce serait cool de pouvoir changer l'arri√®re-plan aussi non? Noir c'est un peu d√©primant...</p>

            <p>Commence par soit dessiner, soit trouver une image d'arri√®re-plan qui te pla√Æt! Lorsque c'est le cas,
              <code>load</code> cette image comme tu as charg√© toutes les autres.
            </p>

            <p>Ensuite, dans la fonction <code>create</code>, on va afficher cette image. Assure-toi que c'est la
              premi√®re chose que tu fais, pour qu'elle apparaisse bien derri√®re tout le reste.</p>

            <pre><code class="language-js">
              this.add.image(400, 250, 'background').setDisplaySize(800, 500);
            </code></pre>

            <p>On fait appara√Ætre l'image au milieu de l'√©cran, et on change la taille pour remplir tout l'√©cran.</p>

            <p>Tu verras s√ªrement que cela ne couvre quand m√™me pas tout l'√©cran. Pour ce changer, on fait simplement
              appara√Ætre plusieurs images:</p>

            <pre><code class="language-js">
              this.add.image(-1200, 250, 'background').setDisplaySize(800, 500);
              this.add.image(-400, 250, 'background').setDisplaySize(800, 500);
              this.add.image(400, 250, 'background').setDisplaySize(800, 500);
              this.add.image(1200, 250, 'background').setDisplaySize(800, 500);
              this.add.image(1600, 250, 'background').setDisplaySize(800, 500);
            </code></pre>

            <p>Voil√†, tu as maintenant un joli arri√®re-plan! Tu peux alors rendre ton jeu aussi long que tu le souhaites
              :)</p>

          </div>
        </div>
      </div>


    </div>
  </div>



  <div class="footer">
    <div class="footer-links">
      <a href="https://tictaclab.org/"><i class="fas fa-globe"></i></i></a>
      <a href="https://www.linkedin.com/company/tictaclab/"><i class="fab fa-linkedin"></i></a>
      <a href="https://www.facebook.com/TicTacLabBXL/"><i class="fab fa-facebook"></i></a>
      <a href="https://www.instagram.com/tictaclabbxl/"><i class="fab fa-instagram"></i></a>
      <a href="https://tictaclab-org.github.io/Fiches/"><i class="fa fa-list"></i> Retour vers les Fiches</a>
    </div>
    <div class="footer-copyright">
      <a href="https://tictaclab.org" rel="noopener noreferrer" target="_blank" class="alert-link copyright">
        <i class="far fa-copyright"></i> 2023 Tic Tac Lab ASBL. All rights reserved.
      </a>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
  <script src="javascript/prism.js"></script>
</body>

</html>
